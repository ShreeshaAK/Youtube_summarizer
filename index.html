<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SumTube â€” AI YouTube Summarizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #090b10;
      --surface: #0f1218;
      --card: #141820;
      --border: #1e2430;
      --accent: #e8ff47;
      --accent2: #47c8ff;
      --text: #eef0f5;
      --muted: #6b7280;
      --danger: #ff5f5f;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Noise texture overlay */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
      opacity: 0.4;
    }

    /* Ambient glow */
    .glow-orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(120px);
      pointer-events: none;
      z-index: 0;
    }
    .glow-orb.one {
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(232,255,71,0.06) 0%, transparent 70%);
      top: -200px; left: -200px;
    }
    .glow-orb.two {
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(71,200,255,0.05) 0%, transparent 70%);
      bottom: -100px; right: -100px;
    }

    /* NAV */
    nav {
      position: relative; z-index: 10;
      display: flex; align-items: center; justify-content: space-between;
      padding: 24px 48px;
      border-bottom: 1px solid var(--border);
    }
    .logo {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: 22px;
      letter-spacing: -0.5px;
    }
    .logo span { color: var(--accent); }
    .badge {
      font-size: 11px;
      font-weight: 500;
      background: rgba(232,255,71,0.1);
      color: var(--accent);
      border: 1px solid rgba(232,255,71,0.25);
      padding: 4px 10px;
      border-radius: 20px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    /* HERO */
    .hero {
      position: relative; z-index: 10;
      text-align: center;
      padding: 80px 24px 60px;
    }
    .hero-eyebrow {
      display: inline-flex; align-items: center; gap: 8px;
      font-size: 12px; letter-spacing: 2px; text-transform: uppercase;
      color: var(--muted); margin-bottom: 24px;
    }
    .hero-eyebrow::before, .hero-eyebrow::after {
      content: ''; display: block;
      width: 32px; height: 1px; background: var(--border);
    }
    h1 {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: clamp(40px, 7vw, 80px);
      line-height: 1.0;
      letter-spacing: -2px;
      margin-bottom: 20px;
    }
    h1 .line2 {
      display: block;
      -webkit-text-stroke: 1px rgba(238,240,245,0.3);
      color: transparent;
    }
    h1 .highlight {
      color: var(--accent);
      -webkit-text-stroke: 0;
    }
    .hero-sub {
      font-size: 17px;
      color: var(--muted);
      font-weight: 300;
      max-width: 480px;
      margin: 0 auto 48px;
      line-height: 1.6;
    }

    /* INPUT AREA */
    .input-wrap {
      position: relative; z-index: 10;
      max-width: 680px;
      margin: 0 auto 20px;
      padding: 0 24px;
    }
    .input-box {
      display: flex;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .input-box:focus-within {
      border-color: rgba(232,255,71,0.4);
      box-shadow: 0 0 0 3px rgba(232,255,71,0.07), 0 8px 32px rgba(0,0,0,0.4);
    }
    .yt-icon {
      display: flex; align-items: center; justify-content: center;
      padding: 0 16px 0 20px;
      flex-shrink: 0;
    }
    .yt-icon svg { width: 22px; height: 22px; }
    #url-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 15px;
      padding: 18px 8px;
      min-width: 0;
    }
    #url-input::placeholder { color: var(--muted); }
    #summarize-btn {
      flex-shrink: 0;
      background: var(--accent);
      color: #0a0c10;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.3px;
      border: none;
      padding: 12px 24px;
      margin: 8px;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.15s, opacity 0.15s;
      white-space: nowrap;
    }
    #summarize-btn:hover { opacity: 0.85; transform: scale(0.98); }
    #summarize-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    .hint {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      margin-top: 12px;
    }

    /* ERROR */
    .error-box {
      max-width: 680px;
      margin: 0 auto 0;
      padding: 0 24px;
      display: none;
    }
    .error-inner {
      background: rgba(255,95,95,0.08);
      border: 1px solid rgba(255,95,95,0.25);
      border-radius: 12px;
      padding: 14px 18px;
      color: var(--danger);
      font-size: 14px;
      display: flex; align-items: center; gap: 10px;
    }

    /* LOADING */
    .loading-section {
      display: none;
      position: relative; z-index: 10;
      text-align: center;
      padding: 64px 24px;
    }
    .loader {
      display: inline-block;
      width: 48px; height: 48px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 20px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loading-text {
      font-family: 'Syne', sans-serif;
      font-size: 16px;
      color: var(--muted);
    }
    .loading-steps {
      font-size: 13px;
      color: var(--muted);
      margin-top: 8px;
      opacity: 0.6;
    }

    /* RESULTS */
    #results {
      display: none;
      position: relative; z-index: 10;
      max-width: 860px;
      margin: 60px auto 80px;
      padding: 0 24px;
      animation: fadeUp 0.5s ease;
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(24px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Section label */
    .section-label {
      font-size: 10px;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
      font-weight: 500;
    }

    /* TLDR */
    .tldr-card {
      background: linear-gradient(135deg, rgba(232,255,71,0.08) 0%, rgba(71,200,255,0.05) 100%);
      border: 1px solid rgba(232,255,71,0.2);
      border-radius: 20px;
      padding: 32px 36px;
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
    }
    .tldr-card::before {
      content: 'TL;DR';
      position: absolute;
      right: 24px; top: 24px;
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: 48px;
      color: rgba(232,255,71,0.06);
      line-height: 1;
      pointer-events: none;
    }
    .tldr-text {
      font-size: 18px;
      line-height: 1.65;
      font-weight: 400;
      color: var(--text);
    }

    /* TOPICS */
    .topics-row {
      display: flex; flex-wrap: wrap; gap: 8px;
      margin-bottom: 24px;
    }
    .topic-tag {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 5px 14px;
      font-size: 12px;
      color: var(--accent2);
      font-weight: 500;
    }

    /* GRID */
    .grid-two {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }
    @media (max-width: 640px) { .grid-two { grid-template-columns: 1fr; } }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 28px;
    }
    .card-title {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 15px;
      margin-bottom: 20px;
      display: flex; align-items: center; gap: 10px;
    }
    .card-title .icon {
      width: 30px; height: 30px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px;
      flex-shrink: 0;
    }
    .icon-yellow { background: rgba(232,255,71,0.12); }
    .icon-blue { background: rgba(71,200,255,0.12); }

    .key-points-list {
      list-style: none;
      display: flex; flex-direction: column; gap: 12px;
    }
    .key-points-list li {
      display: flex; gap: 12px;
      font-size: 14px;
      line-height: 1.55;
      color: #c5c9d4;
    }
    .point-num {
      flex-shrink: 0;
      width: 22px; height: 22px;
      background: rgba(232,255,71,0.1);
      border: 1px solid rgba(232,255,71,0.2);
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      color: var(--accent);
      display: flex; align-items: center; justify-content: center;
      font-family: 'Syne', sans-serif;
      margin-top: 1px;
    }

    .takeaways-list {
      list-style: none;
      display: flex; flex-direction: column; gap: 10px;
    }
    .takeaways-list li {
      display: flex; gap: 10px;
      font-size: 14px; line-height: 1.55;
      color: #c5c9d4;
    }
    .takeaways-list li::before {
      content: 'â†’';
      color: var(--accent2);
      flex-shrink: 0;
      font-size: 13px;
      margin-top: 2px;
    }

    /* DETAILED SUMMARY */
    .detail-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 32px 36px;
    }
    .detail-card p {
      font-size: 15px;
      line-height: 1.8;
      color: #b8bcc8;
      margin-bottom: 16px;
    }
    .detail-card p:last-child { margin-bottom: 0; }

    /* FOOTER */
    footer {
      position: relative; z-index: 10;
      text-align: center;
      padding: 32px;
      border-top: 1px solid var(--border);
      font-size: 13px;
      color: var(--muted);
    }

    /* Mobile nav */
    @media (max-width: 600px) {
      nav { padding: 20px 24px; }
      .hero { padding: 60px 24px 48px; }
    }
  </style>
</head>
<body>

  <div class="glow-orb one"></div>
  <div class="glow-orb two"></div>

  <nav>
    <div class="logo">Sum<span>Tube</span></div>
    <span class="badge">AI Powered</span>
  </nav>

  <section class="hero">
    <p class="hero-eyebrow">English Video Summarizer</p>
    <h1>
      Skip the noise.
      <span class="line2">Get the <span class="highlight">essence.</span></span>
    </h1>
    <p class="hero-sub">Paste any YouTube link and get an AI-powered summary in seconds â€” key points, full breakdown, and actionable takeaways.</p>
  </section>

  <div class="input-wrap">
    <div class="input-box">
      <div class="yt-icon">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M22.54 6.42C22.4212 5.94541 22.1793 5.51057 21.8387 5.15941C21.498 4.80824 21.0708 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.12 4 3.4 4.46C2.92925 4.59318 2.50198 4.84824 2.16135 5.19941C1.82072 5.55057 1.57879 5.98541 1.46 6.46C1.14521 8.20556 0.991235 9.97631 1 11.75C0.988787 13.537 1.14277 15.3213 1.46 17.08C1.59096 17.5398 1.83831 17.9581 2.17814 18.2945C2.51798 18.6308 2.93882 18.8738 3.4 19C5.12 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0708 18.8668 21.498 18.6118 21.8387 18.2606C22.1793 17.9094 22.4212 17.4746 22.54 17C22.8524 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8573 8.1787 22.54 6.42Z" stroke="#ff4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9.75 15.02L15.5 11.75L9.75 8.48V15.02Z" stroke="#ff4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <input type="text" id="url-input" placeholder="Paste YouTube URL here..." autocomplete="off" />
      <button id="summarize-btn" onclick="summarize()">Summarize â†’</button>
    </div>
    <p class="hint">Works with any public YouTube video with English captions</p>
  </div>

  <div class="error-box" id="error-box">
    <div class="error-inner">
      <span>âš </span>
      <span id="error-msg"></span>
    </div>
  </div>

  <div class="loading-section" id="loading">
    <div class="loader"></div>
    <p class="loading-text">Analyzing video...</p>
    <p class="loading-steps" id="loading-step">Fetching transcript</p>
  </div>

  <section id="results">
    <!-- Filled by JS -->
  </section>

  <footer>
    Built with Claude AI Â· SumTube Â© 2025
  </footer>

  <script>
    const steps = ["Fetching transcript...", "Processing with AI...", "Building your summary..."];
    let stepIndex = 0, stepInterval;

    function setLoading(on) {
      document.getElementById("loading").style.display = on ? "block" : "none";
      document.getElementById("summarize-btn").disabled = on;
      if (on) {
        stepIndex = 0;
        document.getElementById("loading-step").textContent = steps[0];
        stepInterval = setInterval(() => {
          stepIndex = (stepIndex + 1) % steps.length;
          document.getElementById("loading-step").textContent = steps[stepIndex];
        }, 2000);
      } else {
        clearInterval(stepInterval);
      }
    }

    function showError(msg) {
      const box = document.getElementById("error-box");
      document.getElementById("error-msg").textContent = msg;
      box.style.display = "block";
      setTimeout(() => box.style.display = "none", 6000);
    }

    async function summarize() {
      const url = document.getElementById("url-input").value.trim();
      if (!url) { showError("Please enter a YouTube URL."); return; }

      document.getElementById("error-box").style.display = "none";
      document.getElementById("results").style.display = "none";
      setLoading(true);

      try {
        const res = await fetch("/summarize", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ url })
        });
        const data = await res.json();
        setLoading(false);

        if (data.error) { showError(data.error); return; }
        renderResults(data);
      } catch (e) {
        setLoading(false);
        showError("Something went wrong. Please try again.");
      }
    }

    function renderResults(d) {
      const topics = (d.topics || []).map(t =>
        `<span class="topic-tag">${t}</span>`
      ).join("");

      const keyPoints = (d.key_points || []).map((p, i) =>
        `<li><span class="point-num">${i + 1}</span><span>${p}</span></li>`
      ).join("");

      const takeaways = (d.takeaways || []).map(t =>
        `<li>${t}</li>`
      ).join("");

      // Split detailed summary into paragraphs
      const paragraphs = (d.detailed_summary || "").split(/\n+/).filter(Boolean).map(p =>
        `<p>${p}</p>`
      ).join("");

      document.getElementById("results").innerHTML = `
        <div class="section-label">Summary</div>
        <div class="tldr-card">
          <p class="tldr-text">${d.tldr || ""}</p>
        </div>

        ${topics ? `<div class="topics-row">${topics}</div>` : ""}

        <div class="grid-two">
          <div class="card">
            <div class="card-title">
              <span class="icon icon-yellow">ðŸ“Œ</span> Key Points
            </div>
            <ul class="key-points-list">${keyPoints}</ul>
          </div>
          <div class="card">
            <div class="card-title">
              <span class="icon icon-blue">ðŸ’¡</span> Takeaways
            </div>
            <ul class="takeaways-list">${takeaways}</ul>
          </div>
        </div>

        <div class="detail-card">
          <div class="card-title" style="margin-bottom:20px;">
            <span class="icon icon-yellow">ðŸ“„</span> Detailed Summary
          </div>
          ${paragraphs}
        </div>
      `;
      document.getElementById("results").style.display = "block";
      document.getElementById("results").scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // Allow Enter key
    document.getElementById("url-input").addEventListener("keydown", e => {
      if (e.key === "Enter") summarize();
    });
  </script>
</body>
</html>
